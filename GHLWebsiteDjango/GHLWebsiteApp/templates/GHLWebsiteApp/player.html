{% extends "GHLWebsiteApp/layout.html" %}
{% load static %}
{% block body %}
<center>
    <div class="section section_lg"><center>
        <div class="subsection-container">
            <table>
                <col style="width: 25%;">
                <col style="width: 900px;">
                <col style="width: 25%;">
                <tr class="no-bg">
                    <td>
                        <img src="{% static 'GHLWebsiteApp/stock-user-photo.jpg' %}" width=220 height=220 />
                    </td>
                    <td>
                        <center>
                            <font style="font-weight: 700; font-size: 68px">{{ playernum.username }}</font>
                        </center>
                    </td>
                    <td>
                        <a href="{% url 'team' playernum.current_team.ea_club_num %}"><img src="{{ playernum.current_team.team_logo_link }}" width=220 height=220 /></a>
                    </td>
                </tr>
            </table>
        </div>
        {% if skater_season_totals %}
        <div class="subsection-container" style="width: 100%;">
            <table class="statsbar">
                <colgroup>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                </colgroup>
                <thead>
                    <tr>
                        <th>GP</th>
                        <th>G</th>
                        <th>A</th>
                        <th>P</th>
                        <th>Hits</th>
                        <th>+/-</th>
                        <th>PIMs</th>
                        <th>Drawn</th>
                        <th>PK Clear</th>
                        <th>S</th>
                        <th>S %</th>
                        <th>S Eff</th>
                        <th>PPG</th>
                        <th>SHG</th>
                        <th>Pass %</th>
                        <th>BS</th>
                        <th>TK</th>
                        <th>INT</th>
                        <th>GVA</th>
                        <th>TOP</th>
                        <th>FO%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="no-bg statline">
                        {% for season in skater_season_totals %}
                        {% if forloop.first %}
                        <td>{{ season.sk_gp }}</td>
                        <td>{{ season.sk_g }}</td>
                        <td>{{ season.sk_a }}</td>
                        <td>{{ season.sk_p }}</td>
                        <td>{{ season.sk_hits }}</td>
                        <td>{{ season.sk_plus_minus }}</td>
                        <td>{{ season.sk_pims }}</td>
                        <td>{{ season.sk_pens_drawn }}</td>
                        <td>{{ season.sk_pk_clears }}</td>
                        <td>{{ season.sk_sog }}</td>
                        <td>{{ season.sk_shot_perc|floatformat:1 }}</td>
                        <td>{{ season.sk_shot_eff|floatformat:1 }}</td>
                        <td>{{ season.sk_ppg }}</td>
                        <td>{{ season.sk_shg }}</td>
                        <td>{{ season.sk_pass_perc|floatformat:1 }}</td>
                        <td>{{ season.sk_bs }}</td>
                        <td>{{ season.sk_tk }}</td>
                        <td>{{ season.sk_int }}</td>
                        <td>{{ season.sk_gva }}</td>
                        <td>{{ season.sk_poss_time|floatformat:1 }}</td>
                        <td>{{ season.sk_fo_perc|floatformat:1 }}</td>
                        {% endif %}
                        {% endfor %}
                    </tr>
                    <tr class="descriptor">
                        <td>games played</td>
                        <td>goals</td>
                        <td>assists</td>
                        <td>points</td>
                        <td>hits</td>
                        <td>plus / minus</td>
                        <td>penalty minutes</td>
                        <td>penalties drawn</td>
                        <td>pk clears</td>
                        <td>shots</td>
                        <td>shooting percentage</td>
                        <td>shooting efficiency</td>
                        <td>powerplay goals</td>
                        <td>shorthanded goals</td>
                        <td>passing percentage</td>
                        <td>blocked shots</td>
                        <td>takeaways</td>
                        <td>interceptions</td>
                        <td>giveaways</td>
                        <td>avg sec of possession</td>
                        <td>faceoff percentage</td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% endif %}
        {% if goalie_season_totals %}
        <div class="subsection-container" style="width: 100%;">
            <table class="statsbar">
                <colgroup>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                </colgroup>
                <thead>
                    <tr>
                        <th>GP</th>
                        <th>W</th>
                        <th>L</th>
                        <th>OTL</th>
                        <th>GA</th>
                        <th>SH</th>
                        <th>SV%</th>
                        <th>GAA</th>
                        <th>SO</th>
                        <th>PS</th>
                        <th>PS%</th>
                        <th>BRK</th>
                        <th>BRK%</th>
                        <th>MIN</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="no-bg statline">
                        {% for season in goalie_season_totals %}
                        {% if forloop.first %}
                        <td>{{ season.g_gp }}</td>
                        <td>{{ season.g_wins }}</td>
                        <td>{{ season.g_losses }}</td>
                        <td>{{ season.g_otlosses }}</td>
                        <td>{{ season.g_ga }}</td>
                        <td>{{ season.g_sha }}</td>
                        <td>{{ season.g_svp|floatformat:1 }}</td>
                        <td>{{ season.g_gaa|floatformat:2 }}</td>
                        <td>{{ season.g_so }}</td>
                        <td>{{ season.g_ps_sh }}</td>
                        <td>{{ season.g_ps_perc }}</td>
                        <td>{{ season.g_br_sh }}</td>
                        <td>{{ season.g_br_perc }}</td>
                        <td>{{ season.g_toi|floatformat:0 }}</td>
                        {% endif %}
                        {% endfor %}
                    </tr>
                    <tr class="descriptor">
                        <td>games played</td>
                        <td>wins</td>
                        <td>losses</td>
                        <td>overtime losses</td>
                        <td>goals against</td>
                        <td>shots against</td>
                        <td>save percentage</td>
                        <td>goals against average</td>
                        <td>shutouts</td>
                        <td>penalty shots</td>
                        <td>penalty shot %</td>
                        <td>breakaways</td>
                        <td>breakaway %</td>
                        <td>minutes played</td>
                    </tr>
                </tbody>
            </table>
        </div>
        {% endif %}
    </center></div>
    {% if games %}
    <div class="section section_lg"><center>
        <div class="subsection-container" style="flex-direction: column;">
            <div class="header" style="width: 100%; text-align: center; margin-bottom: 1px;">
                Game Log
            </div><br>
            <div>
                <table class="statsbar betweenrows" style="width: 800px;">
                    <colgroup>
                        <col style="width: 160px;"><!-- Game Time -->
                        <col><!-- Away Team -->
                        <col style="width: 80px;"><!-- Away Score -->
                        <col style="width: 80px;"><!-- Final or OT -->
                        <col style="width: 80px;"><!-- Home Score -->
                        <col><!-- Home Team -->
                    </colgroup>
                    <thead>
                        <tr>
                            <th>Game Time</th>
                            <th style="text-align: right; padding-right: 15px;">Away Team</th>
                            <th>Away Score</th>
                            <th>Final/OT</th>
                            <th>Home Score</th>
                            <th style="text-align: left; padding-left: 15px;">Home Team</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for game in games %}
                        <tr class="no-bg">
                            <td>{{ game.expected_time|date:"m/d/y  g:i" }}</td>
                            <td style="text-align: right; padding-right: 10px;"><a href="{% url 'team' game.a_team_num.ea_club_num %}">{{ game.a_team_num.club_full_name }}</a></td>
                            <td>{{ game.a_team_gf }}</td>
                            {% if game.gamelength > 3600 %}
                            <td><a href="{% url 'game' game.game_num %}">Final/OT</a></td>
                            {% elif game.played_time is None %}
                            <td><a href="{% url 'game' game.game_num %}">@</a></td>
                            {% else %}
                            <td><a href="{% url 'game' game.game_num %}">Final</a></td>
                            {% endif %}
                            <td>{{ game.h_team_gf }}</td>
                            <td style="text-align: left; padding-left: 10px;"><a href="{% url 'team' game.h_team_num.ea_club_num %}">{{ game.h_team_num.club_full_name }}</a></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </center></div>
    {% endif %}
    <div class="section section_lg" style="align-items: auto; width: 90%; overflow: scroll; margin-bottom: 10px;"><center>
        <div class="header" style="width: 100%; text-align: center; margin-bottom: 1px;">
            Historical Stats
        </div><br>
        {% if skater_season_totals %}
        <div><table class="statsbar betweenrows">
            <colgroup>
                <col style="width: 150px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
                <col style="width: 80px;">
            </colgroup>
            <thead>
                <tr>
                    <th>Season</th>
                    <th>GP</th>
                    <th>G</th>
                    <th>A</th>
                    <th>PTS</th>
                    <th>Hits</th>
                    <th>+/-</th>
                    <th>PIMs</th>
                    <th>Drawn</th>
                    <th>PK Clear</th>
                    <th>S</th>
                    <th>S%</th>
                    <th>S Eff</th>
                    <th>PPG</th>
                    <th>SHG</th>
                    <th>Pass %</th>
                    <th>BS</th>
                    <th>TK</th>
                    <th>INT</th>
                    <th>GVA</th>
                    <th>TOP</th>
                    <th>FO%</th>
                </tr>
            </thead>
            <tbody>
                {% for season in skater_season_totals %}
                <tr class="no-bg">
                    <td>{{ season.game_num__season_num__season_text }}</td>
                    <td>{{ season.sk_gp }}</td>
                    <td>{{ season.sk_g }}</td>
                    <td>{{ season.sk_a }}</td>
                    <td>{{ season.sk_p }}</td>
                    <td>{{ season.sk_hits }}</td>
                    <td>{{ season.sk_plus_minus }}</td>
                    <td>{{ season.sk_pims }}</td>
                    <td>{{ season.sk_pens_drawn }}</td>
                    <td>{{ season.sk_pk_clears }}</td>
                    <td>{{ season.sk_sog }}</td>
                    <td>{{ season.sk_shot_perc|floatformat:1 }}</td>
                    <td>{{ season.sk_shot_eff|floatformat:1 }}</td>
                    <td>{{ season.sk_ppg }}</td>
                    <td>{{ season.sk_shg }}</td>
                    <td>{{ season.sk_pass_perc|floatformat:1 }}</td>
                    <td>{{ season.sk_bs }}</td>
                    <td>{{ season.sk_tk }}</td>
                    <td>{{ season.sk_int }}</td>
                    <td>{{ season.sk_gva }}</td>
                    <td>{{ season.sk_poss_time|floatformat:1 }}</td>
                    <td>{{ season.sk_fo_perc|floatformat:1 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table></div>
    </center></div>
    {% endif %}
    {% if goalie_season_totals %}
    <div class="section_lg" style="align-items: auto; width: 90%; overflow: scroll; margin-bottom: 10px;"><center>
        <table class="statsbar betweenrows">
            <col style="width: 150px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <col style="width: 80px;">
            <thead>
                <tr>
                    <th>Season</th>
                    <th>GP</th>
                    <th>W</th>
                    <th>L</th>
                    <th>OTL</th>
                    <th>GA</th>
                    <th>SH</th>
                    <th>SV%</th>
                    <th>GAA</th>
                    <th>SO</th>
                    <th>PS</th>
                    <th>PS%</th>
                    <th>BRK</th>
                    <th>BRK%</th>
                    <th>MIN</th>
                </tr>
            </thead>
            <tbody>
                {% for season in goalie_season_totals %}
                <tr class="no-bg">
                    <td>{{ season.game_num__season_num__season_text }}</td>
                    <td>{{ season.g_gp }}</td>
                    <td>{{ season.g_wins }}</td>
                    <td>{{ season.g_losses }}</td>
                    <td>{{ season.g_otlosses }}</td>
                    <td>{{ season.g_ga }}</td>
                    <td>{{ season.g_sha }}</td>
                    <td>{{ season.g_svp|floatformat:1 }}</td>
                    <td>{{ season.g_gaa|floatformat:2 }}</td>
                    <td>{{ season.g_so }}</td>
                    <td>{{ season.g_ps_sh }}</td>
                    <td>{{ season.g_ps_perc }}</td>
                    <td>{{ season.g_br_sh }}</td>
                    <td>{{ season.g_br_perc }}</td>
                    <td>{{ season.g_toi|floatformat:0 }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan=25>No goalie stats recorded.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </center></div>
    {% endif %}
</center>
{% endblock %}